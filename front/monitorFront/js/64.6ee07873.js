(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[64],{4018:function(e){function t(e){if(e=Object.assign({},e),!(this instanceof t))throw new Error("MapboxLanguage needs to be called with the new keyword");this.setLanguage=this.setLanguage.bind(this),this._initialStyleUpdate=this._initialStyleUpdate.bind(this),this._defaultLanguage=e.defaultLanguage,this._isLanguageField=e.languageField||/^name_/,this._getLanguageField=e.getLanguageField||function(e){return"mul"===e?"name":`name_${e}`},this._languageSource=e.languageSource||null,this._languageTransform=e.languageTransform,this._excludedLayerIds=e.excludedLayerIds||[],this.supportedLanguages=e.supportedLanguages||["ar","de","en","es","fr","it","ja","ko","mul","pt","ru","vi","zh-Hans","zh-Hant"]}const a=/^\{name/;function n(e,t){const n=Array.isArray(t)&&"get"===t[0];return n&&a.test(t[1])&&console.warn("This plugin no longer supports the use of token syntax (e.g. {name}). Please use a get expression. See https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/ for more details."),n&&e.test(t[1])}function l(e,t,a){if(Array.isArray(t))for(let s=1;s<t.length;s++)Array.isArray(t[s])&&(n(e,t[s])&&(t[s][1]=a),l(e,t[s],a))}function s(e,t,a){if(n(e,t)&&(t[1]=a),l(e,t,a),"get"===t[0]&&"name"===t[1]){const e=t.slice(),n=["get",a];t=["coalesce",n,e]}return t}function r(e,t,a,n){return t.layout&&t.layout["text-field"]&&-1===n.indexOf(t.id)?Object.assign({},t,{layout:Object.assign({},t.layout,{"text-field":s(e,t.layout["text-field"],a)})}):t}function i(e){const t=Object.keys(e.sources).filter((t=>{const a=e.sources[t].url;return a&&a.indexOf("mapbox.mapbox-streets-v8")>-1||/mapbox-streets-v[1-9][1-9]/.test(a)}));if(!t.length)throw new Error('If using MapboxLanguage with a Mapbox style, the style must be based on vector tile version 8, e.g. "streets-v11"');return t[0]}function o(e){const t=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage,a=t&&t.split("-");let n=t;return a.length>1&&(n=a[0]),e.indexOf(n)>-1?n:null}t.prototype.setLanguage=function(e,t){if(this.supportedLanguages.indexOf(t)<0)throw new Error(`Language ${t} is not supported`);const a=this._languageSource||i(e);if(!a)return e;const n=this._getLanguageField(t),l=this._isLanguageField,s=this._excludedLayerIds,o=e.layers.map((e=>e.source===a?r(l,e,n,s):e)),u=Object.assign({},e,{layers:o});return this._languageTransform?this._languageTransform(u,t):u},t.prototype._initialStyleUpdate=function(){const e=this._map.getStyle(),t=this._defaultLanguage||o(this.supportedLanguages);this._map.setStyle(this.setLanguage(e,t))},t.prototype.onAdd=function(e){return this._map=e,this._map.on("style.load",this._initialStyleUpdate),this._container=document.createElement("div"),this._container},t.prototype.onRemove=function(){this._map.off("style.load",this._initialStyleUpdate),this._map=void 0},"undefined"!==typeof e.exports?e.exports=t:window.MapboxLanguage=t},3029:function(e,t,a){"use strict";a.d(t,{Z:function(){return f}});var n=a(3396);const l={class:"excel-main"};function s(e,t,a,s,r,i){const o=(0,n.up)("sand-content"),u=(0,n.up)("suspension"),d=(0,n.up)("rate-and-direction"),c=(0,n.up)("salinity"),v=(0,n.up)("flow-sand-z"),g=(0,n.up)("water-level-chart");return(0,n.wg)(),(0,n.iD)("div",l,[0!=e.sandContentList.length?((0,n.wg)(),(0,n.j4)(o,{key:0,visualId:e.sandContentList[e.centerIndex],ref:"sandContent"},null,8,["visualId"])):(0,n.kq)("",!0),0!=e.suspensionList.length?((0,n.wg)(),(0,n.j4)(u,{key:1,visualId:e.suspensionList[e.centerIndex],ref:"suspension"},null,8,["visualId"])):(0,n.kq)("",!0),0!=e.rateDirectionList.length?((0,n.wg)(),(0,n.j4)(d,{key:2,visualId:e.rateDirectionList[e.centerIndex],ref:"rateAndDirection"},null,8,["visualId"])):(0,n.kq)("",!0),0!=e.salinityList.length?((0,n.wg)(),(0,n.j4)(c,{key:3,visualId:e.salinityList[e.centerIndex],ref:"salinity"},null,8,["visualId"])):(0,n.kq)("",!0),0!=e.flowSandZList.length?((0,n.wg)(),(0,n.j4)(v,{key:4,visualId:e.flowSandZList[e.centerIndex],ref:"flowSandZ"},null,8,["visualId"])):(0,n.kq)("",!0),e.waterLevelChartInfo.flag?((0,n.wg)(),(0,n.j4)(g,{key:5,info:e.waterLevelChartInfo,ref:"waterLevelChart"},null,8,["info"])):(0,n.kq)("",!0)])}var r=a(4870),i=a(8652),o=a(6692),u=a(1163),d=a(5392),c=a(304),v=a(4461),g=(0,n.aZ)({components:{SandContent:i.Z,Suspension:o.Z,RateAndDirection:u.Z,Salinity:d.Z,FlowSandZ:c.Z,WaterLevelChart:v.Z},props:{sandContentList:{type:Array},suspensionList:{type:Array},rateDirectionList:{type:Array},salinityList:{type:Array},flowSandZList:{type:Array},tableNameList:{type:Array},waterLevelChartInfo:{type:Object}},setup(e){const t=(0,r.iH)(),a=(0,r.iH)(),l=(0,r.iH)(),s=(0,r.iH)(),i=(0,r.iH)(),o=(0,r.iH)(),u=(0,r.iH)(0),d=(0,n.Fl)((()=>(u.value-1+v.value.length)%v.value.length)),c=(0,n.Fl)((()=>(u.value+1)%v.value.length)),v=(0,n.Fl)((()=>e.tableNameList)),g=(0,n.Fl)((()=>e.sandContentList)),p=(0,n.Fl)((()=>e.suspensionList)),y=(0,n.Fl)((()=>e.rateDirectionList)),f=(0,n.Fl)((()=>e.salinityList)),h=(0,n.Fl)((()=>e.flowSandZList)),m=(0,n.Fl)((()=>e.waterLevelChartInfo)),w=async e=>{u.value="left"===e?(u.value-1+v.value.length)%v.value.length:(u.value+1)%v.value.length,0!=g.value?.length?await t.value.refreshData(g.value[u.value]):0!=p.value?.length?await a.value.refreshData(p.value[u.value]):0!=y.value?.length?await l.value.refreshData(y.value[u.value]):0!=f.value?.length?await s.value.refreshData(f.value[u.value]):0!=h.value?.length?await i.value.refreshData(h.value[u.value]):o&&o.value.refreshData()};return(0,n.bv)((()=>{console.log(e.waterLevelChartInfo)})),{sandContent:t,suspension:a,rateAndDirection:l,salinity:s,flowSandZ:i,tableNameList:v,sandContentList:g,suspensionList:p,rateDirectionList:y,salinityList:f,flowSandZList:h,centerIndex:u,leftIndex:d,rightIndex:c,waterLevelChartInfo:m,waterLevelChart:o,changeExcel:w}}}),p=a(89);const y=(0,p.Z)(g,[["render",s],["__scopeId","data-v-bb6eab98"]]);var f=y},1198:function(e,t,a){"use strict";a.d(t,{Z:function(){return L}});var n=a(3396),l=a(7139);const s={class:"map-visual"},r={class:"body"},i={class:"text",style:{"margin-left":"20px"}},o={class:"icon icon-left"},u={class:"text"},d={class:"body"},c={class:"text"},v={class:"icon icon-right"},g={ref:"container",class:"container"};function p(e,t,a,p,y,f){const h=(0,n.up)("ArrowLeftBold"),m=(0,n.up)("el-icon"),w=(0,n.up)("el-card"),_=(0,n.up)("el-col"),x=(0,n.up)("ArrowRightBold"),I=(0,n.up)("el-row");return(0,n.wg)(),(0,n.iD)("div",s,[e.movePngArray.length>1?((0,n.wg)(),(0,n.j4)(I,{key:0,gutter:20,justify:"center",style:{"margin-bottom":"20px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{span:8,style:{"text-align":"center"}},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{class:"video",shadow:"always",style:{"margin-top":"30px","margin-bottom":"10px"},onClick:t[0]||(t[0]=t=>e.changeRaster("left"))},{default:(0,n.w5)((()=>[(0,n._)("div",r,[(0,n._)("div",i,[(0,n._)("strong",null,(0,l.zw)(e.movePngArray[e.leftIndex].name),1)]),(0,n._)("div",o,[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h)])),_:1})])])])),_:1})])),_:1}),(0,n.Wm)(_,{span:8,style:{"text-align":"center"}},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{shadow:"always",style:{"margin-top":"10px","margin-bottom":"10px","background-color":"lightgrey"}},{default:(0,n.w5)((()=>[(0,n._)("div",u,[(0,n._)("strong",null,(0,l.zw)(e.movePngArray[e.centerIndex].name),1)])])),_:1})])),_:1}),(0,n.Wm)(_,{span:8,style:{"text-align":"center"}},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{class:"video",shadow:"always",style:{"margin-top":"30px","margin-bottom":"10px"},onClick:t[1]||(t[1]=t=>e.changeRaster("right"))},{default:(0,n.w5)((()=>[(0,n._)("div",d,[(0,n._)("div",c,[(0,n._)("strong",null,(0,l.zw)(e.movePngArray[e.rightIndex].name),1)]),(0,n._)("div",v,[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(x)])),_:1})])])])),_:1})])),_:1})])),_:1})):(0,n.kq)("",!0),(0,n._)("div",g,null,512)])}a(7658);var y=a(4870),f=a(7709),h=a.n(f),m=a(4018),w=a.n(m),_=(0,n.aZ)({props:{shpArray:{type:Array},pngArray:{type:Array},rasterTileArray:{type:Array},movePngArray:{type:Array}},setup(e){const t=(0,y.iH)();let a,l=[120.972137,31.821921],s=10;const r=[],i=()=>{void 0!=e.rasterTileArray&&e.rasterTileArray.forEach((e=>{a.addSource(e.visualId,{type:"raster",tiles:[`https://192.168.30.3:8050/monitor/visual/getRaster/${e.visualId}/{x}/{y}/{z}`]}),a.addLayer({id:e.visualId,type:"raster",source:e.visualId}),r.push(e.visualId)})),void 0!=e.pngArray&&e.pngArray.forEach((e=>{a.addSource(e.visualId,{type:"image",url:`https://192.168.30.3:8050/monitor/visual/getPngResource/${e.visualId}`,coordinates:e.coordinates}),a.addLayer({id:e.visualId,type:"raster",source:e.visualId}),r.push(e.visualId)})),u.value.length>0&&(a.addSource(u.value[0].visualId,{type:"image",url:`https://192.168.30.3:8050/monitor/visual/getPngResource/${u.value[0].visualId}`,coordinates:u.value[0].coordinates}),a.addLayer({id:u.value[0].visualId,type:"raster",source:u.value[0].visualId}),r.push(u.value[0].visualId)),void 0!=e.shpArray&&e.shpArray.forEach((e=>{a.addSource(e.visualId,{type:"vector",tiles:[`https://192.168.30.3:8050/monitor/visual/getVectorTiles/${e.visualId}/{x}/{y}/{z}`]}),a.addLayer({id:e.visualId,source:e.visualId,type:e.type,"source-layer":e.visualId}),r.push(e.visualId)}));const t=[...e.movePngArray,...e.pngArray,...e.rasterTileArray,...e.shpArray];for(let e=0;e<t.length;e++)l=t[e].view.center,s=t[e].view.zoom;a.setZoom(s),a.setCenter(l)},o=()=>{a=new(h().Map)({container:t.value,style:"mapbox://styles/mapbox/streets-v12",center:l,zoom:s,accessToken:"pk.eyJ1Ijoiam9obm55dCIsImEiOiJja2xxNXplNjYwNnhzMm5uYTJtdHVlbTByIn0.f1GfZbFLWjiEayI6hb_Qvg"}),a.on("load",i);var e=new(w())({defaultLanguage:"zh-Hans"});a.addControl(e)},u=(0,n.Fl)((()=>e.movePngArray)),d=(0,y.iH)(0),c=(0,n.Fl)((()=>(d.value-1+u.value.length)%u.value.length)),v=(0,n.Fl)((()=>(d.value+1)%u.value.length)),g=e=>{const t=d.value;d.value="left"===e?(d.value-1+u.value.length)%u.value.length:(d.value+1)%u.value.length,a.addSource(u.value[d.value].visualId,{type:"image",url:`https://192.168.30.3:8050/monitor/visual/getPngResource/${u.value[d.value].visualId}`,coordinates:u.value[d.value].coordinates}),a.addLayer({id:u.value[d.value].visualId,type:"raster",source:u.value[d.value].visualId}),a.setZoom(u.value[d.value].view.zoom),a.setCenter(u.value[d.value].view.center),a.removeLayer(u.value[t].visualId),a.removeSource(u.value[t].visualId),r.pop(),r.push(u.value[d.value].visualId)};return(0,n.YP)((()=>[...e.movePngArray,...e.pngArray,...e.rasterTileArray,...e.shpArray]),(()=>{r.forEach((e=>{a.getLayer(e)&&(a.removeLayer(e),a.removeSource(e))})),i()})),(0,n.bv)((()=>{o()})),{container:t,movePngArray:u,changeRaster:g,centerIndex:d,leftIndex:c,rightIndex:v}}}),x=a(89);const I=(0,x.Z)(_,[["render",p],["__scopeId","data-v-453356fe"]]);var L=I},9028:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var n=a(3396);const l={class:"photo-visual"};function s(e,t,a,s,r,i){const o=(0,n.up)("el-image"),u=(0,n.up)("el-carousel-item"),d=(0,n.up)("el-carousel");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n.Wm)(d,{interval:2e3,type:"card",style:{"margin-top":"30px"},"indicator-position":"none"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.photoList,(e=>((0,n.wg)(),(0,n.j4)(u,{key:e},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{fit:"fill",src:e},null,8,["src"])])),_:2},1024)))),128))])),_:1})])}var r=(0,n.aZ)({props:{photoList:{type:Array}},setup(e){const t=(0,n.Fl)((()=>e.photoList));return{photoList:t}}}),i=a(89);const o=(0,i.Z)(r,[["render",s],["__scopeId","data-v-63658bdc"]]);var u=o},3577:function(e,t,a){"use strict";a.d(t,{Z:function(){return w}});var n=a(3396),l=a(7139);const s={class:"video-visual"},r={class:"body"},i={class:"text",style:{"margin-left":"20px"}},o={class:"icon icon-left"},u={class:"text"},d={class:"body"},c={class:"text"},v={class:"icon icon-right"},g=["src"];function p(e,t,a,p,y,f){const h=(0,n.up)("ArrowLeftBold"),m=(0,n.up)("el-icon"),w=(0,n.up)("el-card"),_=(0,n.up)("el-col"),x=(0,n.up)("ArrowRightBold"),I=(0,n.up)("el-row"),L=(0,n.up)("el-skeleton");return(0,n.wg)(),(0,n.iD)("div",s,[e.urls.length>1?((0,n.wg)(),(0,n.j4)(I,{key:0,gutter:20,justify:"center",style:{"margin-bottom":"20px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{span:8,style:{"text-align":"center"}},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{class:"video",shadow:"always",style:{"margin-top":"30px","margin-bottom":"10px"},onClick:t[0]||(t[0]=t=>e.changeHandle("left"))},{default:(0,n.w5)((()=>[(0,n._)("div",r,[(0,n._)("div",i,[(0,n._)("strong",null,(0,l.zw)(e.urls[e.leftIndex].fileName),1)]),(0,n._)("div",o,[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h)])),_:1})])])])),_:1})])),_:1}),(0,n.Wm)(_,{span:8,style:{"text-align":"center"}},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{shadow:"always",style:{"margin-top":"10px","margin-bottom":"10px","background-color":"lightgrey"}},{default:(0,n.w5)((()=>[(0,n._)("div",u,[(0,n._)("strong",null,(0,l.zw)(e.urls[e.centerIndex].fileName),1)])])),_:1})])),_:1}),(0,n.Wm)(_,{span:8,style:{"text-align":"center"}},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{class:"video",shadow:"always",style:{"margin-top":"30px","margin-bottom":"10px"},onClick:t[1]||(t[1]=t=>e.changeHandle("right"))},{default:(0,n.w5)((()=>[(0,n._)("div",d,[(0,n._)("div",c,[(0,n._)("strong",null,(0,l.zw)(e.urls[e.rightIndex].fileName),1)]),(0,n._)("div",v,[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(x)])),_:1})])])])),_:1})])),_:1})])),_:1})):(0,n.kq)("",!0),e.skeletonFlag?((0,n.wg)(),(0,n.j4)(L,{key:1,rows:5,animated:""})):((0,n.wg)(),(0,n.iD)("video",{key:2,ref:"player",controls:"",src:e.urls[e.centerIndex].url,autoplay:""},null,8,g))])}var y=a(4870),f=(0,n.aZ)({props:{urls:{type:Array}},setup(e){const t=(0,y.iH)(),a=(0,y.iH)([]),l=(0,y.iH)(!0),s=(0,y.iH)(0),r=(0,n.Fl)((()=>(s.value-1+a.value.length)%a.value.length)),i=(0,n.Fl)((()=>(s.value+1)%a.value.length)),o=e=>{s.value="left"===e?(s.value-1+a.value.length)%a.value.length:(s.value+1)%a.value.length};return(0,n.bv)((()=>{console.log(e.urls),a.value=e.urls,l.value=!1})),{urls:a,centerIndex:s,leftIndex:r,rightIndex:i,player:t,changeHandle:o,skeletonFlag:l}}}),h=a(89);const m=(0,h.Z)(f,[["render",p],["__scopeId","data-v-fc256e66"]]);var w=m},4461:function(e,t,a){"use strict";a.d(t,{Z:function(){return v}});var n=a(3396);const l={class:"water-level-info"},s={class:"chart",ref:"chart"};function r(e,t,a,r,i,o){return(0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("div",s,null,512)])}var i=a(4870),o=a(9043),u=(0,n.aZ)({props:{info:{type:Object}},setup(e){const t=(0,i.iH)();let a,l={};const s=()=>{e.info&&(l={title:{padding:[10,0,0,160],text:"实时水位",textStyle:{fontFamily:"Microsoft YaHei"}},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:e.info.legend,top:10},grid:{top:50,right:50*(e.info.series.length-1)},dataZoom:[{xAxisIndex:[0],filterMode:"filter",start:50,end:100}],xAxis:{name:"时间",type:"category",data:e.info.timeList,nameTextStyle:{width:20,overflow:"none",textBorderType:"solid"}},yAxis:e.info.yAxis,series:e.info.series})},r=()=>{s(),a.setOption(l)};return(0,n.bv)((()=>{s(),a=o.S1(t.value),a.setOption(l)})),{chart:t,refreshData:r}}}),d=a(89);const c=(0,d.Z)(u,[["render",r],["__scopeId","data-v-5adbae78"]]);var v=c},8938:function(e,t,a){"use strict";a.d(t,{Z:function(){return j}});var n=a(3396);const l=e=>((0,n.dD)("data-v-320d48f0"),e=e(),(0,n.Cn)(),e),s={class:"page-copyrught"},r={class:"top"},i=l((()=>(0,n._)("div",null,[(0,n._)("strong",null,"支撑服务")],-1))),o=l((()=>(0,n._)("div",{class:"border"},null,-1))),u=l((()=>(0,n._)("div",{class:"text-model"},"资源门户",-1))),d=l((()=>(0,n._)("div",{class:"text-model"},"监测与预报",-1))),c=l((()=>(0,n._)("div",{class:"text-model"},"水运一张图",-1))),v=l((()=>(0,n._)("div",{class:"text-model"},"工程可视化",-1))),g=l((()=>(0,n._)("div",{class:"text-model"},"分析中心",-1))),p=l((()=>(0,n._)("div",null,[(0,n._)("strong",null,"联系我们")],-1))),y=l((()=>(0,n._)("div",{class:"border"},null,-1))),f=l((()=>(0,n._)("div",{class:"text"},"地址：南京市广州路223号",-1))),h=l((()=>(0,n._)("div",{class:"text"},"南科院联系电话：025-85828808",-1))),m=l((()=>(0,n._)("div",{class:"text"},"邮箱：webmaster@nhri.cn",-1))),w=l((()=>(0,n._)("div",{class:"text"},"邮编：210029",-1))),_=l((()=>(0,n._)("div",null,[(0,n._)("strong",null,"关于我们")],-1))),x=l((()=>(0,n._)("div",{class:"border"},null,-1))),I=l((()=>(0,n._)("div",{class:"text"},"南京水利科学研究院",-1))),L=l((()=>(0,n._)("img",{src:"/resource/wx_code.jpg",alt:""},null,-1))),b=l((()=>(0,n._)("div",{class:"dividing-line one"},null,-1))),A=l((()=>(0,n._)("div",{class:"dividing-line two"},null,-1))),k=l((()=>(0,n._)("div",{class:"bottom"}," ©水利部交通运输部国家能源局南京水利科学研究院   |   Copyright ©2022   |   苏ICP备05007122号 ",-1)));function Z(e,t,a,l,Z,S){const C=(0,n.up)("el-col"),W=(0,n.up)("el-row");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",r,[(0,n.Wm)(W,null,{default:(0,n.w5)((()=>[(0,n.Wm)(C,{span:8},{default:(0,n.w5)((()=>[i,o,u,d,c,v,g])),_:1}),(0,n.Wm)(C,{span:8},{default:(0,n.w5)((()=>[p,y,f,h,m,w])),_:1}),(0,n.Wm)(C,{span:8},{default:(0,n.w5)((()=>[_,x,I,L])),_:1})])),_:1}),b,A]),k])}var S=(0,n.aZ)({setup(){}}),C=a(89);const W=(0,C.Z)(S,[["render",Z],["__scopeId","data-v-320d48f0"]]);var j=W}}]);
//# sourceMappingURL=64.6ee07873.js.map